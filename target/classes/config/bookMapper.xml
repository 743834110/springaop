<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lingnan.mybatisdemo.mapper.BookMapper">


    <select id="getBooksByCategoryName" parameterType="javafx.beans.property.SimpleStringProperty" resultType="com.lingnan.mybatisdemo.bean.Book">
        SELECT book.book_name bookName, book.isbn, book.price, book.publish_date publishDate, book.publisher
        from book WHERE book.category_id IN (
            SELECT category.id FROM category
            WHERE category.name LIKE
                <bind name="pattern" value="'%' + name + '%'"/> #{pattern}
        )
    </select>
</mapper>